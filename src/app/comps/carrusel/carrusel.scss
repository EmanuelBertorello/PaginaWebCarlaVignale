@use "sass:color";

/* ===== Paleta Carla Vignale ===== */
$negro:        #000000;
$gris-oscuro:  #333133;
$plata-calida: #bdc3cf;
$azul-noche:   #0a2e50;
$blanco-roto:  #f5f5dc;

/* ===== Carrusel compacto tipo ‚ÄúSancor‚Äù (versi√≥n reducida) ===== */
.carousel {
  /* Layout / tema (compacto por defecto) */
  --container-max: 1180px;
  --slide-h: 240px;    /* altura del card */
  --peek: 40px;        /* cu√°nto asoma a los costados */
  --gap: 18px;
  --radius: 14px;
  --shadow: 0 14px 28px rgba(0, 0, 0, .18);
  --shadow-strong: 0 18px 40px rgba(0, 0, 0, .22);

  /* Colores adaptados a la paleta */
  --brand: #0a2e50;          /* azul medianoche */
  --dot: #bdc3cf;            /* plata c√°lida */
  --dot-active: #000000;     /* negro */

  /* Logo ‚Äúencapsulado‚Äù */
  --logo-box: 120px;   /* tama√±o del contenedor del logo */
  --logo-radius: 14px; /* 999px => c√≠rculo */

  margin: 18px 0 8px;
  width: 100%;
  overflow-x: hidden;          /* üîí que no genere scroll horizontal */
}

/* T√≠tulo alineado al carrusel */
.carousel__title {
  max-width: var(--container-max);
  margin: 0 auto 12px;
  padding: 0 var(--peek);
  font-size: clamp(20px, 2.2vw, 26px);
  font-weight: 800;
  letter-spacing: -.01em;
  position: relative;
  color: $azul-noche;

  &::after {
    content: "";
    position: absolute;
    left: var(--peek);
    bottom: -8px;
    width: 72px;
    height: 3px;
    background: var(--brand);
    border-radius: 999px;
  }
}

/* Viewport con ‚Äúpeek‚Äù lateral */
.carousel__viewport {
  position: relative;
  max-width: var(--container-max);
  margin: 0 auto;
  padding: 0 var(--peek);
  box-sizing: border-box;
  overflow: hidden;            /* üîí el track no puede sobresalir */
}

/* Carril */
.carousel__track {
  --i: 0;
  display: flex;
  gap: var(--gap);
  transform: translateX(calc(var(--i) * -100%));
  transition: transform 420ms cubic-bezier(.22, .75, .08, 1);
  will-change: transform;
}

/* Slide (fondo con paleta) */
.slide {
  flex: 0 0 100%;
  min-width: 0;
  height: var(--slide-h);
  border-radius: var(--radius);
  overflow: hidden;
  position: relative;
  background: radial-gradient(
    140% 180% at 0% 0%,
    color.adjust($azul-noche, $lightness: 5%) 0 55%,
    $negro 100%
  );
  box-shadow: var(--shadow);
  transform: translateY(0) scale(.995);
  transition: transform .28s ease, box-shadow .28s ease;

  &.is-active {
    transform: translateY(-1px) scale(1);
    box-shadow: var(--shadow-strong);
  }
}

/* ===== Media (logo + contenedor con degradado) ===== */
.slide__media {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  z-index: 1;
}

/* Pastilla vertical detr√°s del logo, en tonos claros de la paleta */
.slide__media::before {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(.995);

  width: var(--logo-box);
  height: var(--logo-box);
  border-radius: calc(var(--logo-radius) + 6px);

  background: linear-gradient(
    to bottom,
    $blanco-roto 0%,
    color.adjust($plata-calida, $lightness: 5%) 55%,
    $plata-calida 100%
  );
  border: 1px solid rgba(0, 0, 0, .06);
  box-shadow:
    0 10px 24px rgba(0, 0, 0, .22),
    inset 0 1px 0 rgba(255, 255, 255, .28);

  z-index: 0;
  pointer-events: none;
}

/* Logo reducido y redondeado */
.slide__logo {
  position: relative;
  z-index: 1;
  width: calc(var(--logo-box) - 32px);
  height: auto;
  border-radius: var(--logo-radius);
  box-shadow: 0 6px 16px rgba(0, 0, 0, .18);
  opacity: .95;
  transform: translateZ(0);
}

/* sutil ‚Äúpop‚Äù al activar */
.slide.is-active .slide__media::before {
  transform: translate(-50%, -50%) scale(1.03);
}

/* ===== Overlay de texto a la izquierda ===== */
.slide__overlay {
  position: absolute;
  inset: 0;
  padding: clamp(10px, 2.2vw, 20px);
  display: grid;
  align-content: center;
  gap: 6px;
  background: linear-gradient(
    90deg,
    rgba($azul-noche, .80) 0%,
    rgba($negro, .45) 55%,
    rgba($negro, 0) 100%
  );
  color: #fff;
  z-index: 2;
}
.slide__title {
  margin: 0 0 4px;
  font-size: clamp(16px, 2.2vw, 22px);
  font-weight: 800;
  letter-spacing: -.01em;
}
.slide__subtitle {
  margin: 0;
  font-size: clamp(11px, 1.4vw, 14px);
  color: color.adjust($blanco-roto, $lightness: 5%);
}

/* ===== Flechas compactas ===== */
.nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 32px;
  height: 32px;
  border-radius: 999px;
  border: 1px solid rgba(0, 0, 0, .06);
  background: $blanco-roto;
  display: grid;
  place-items: center;
  cursor: pointer;
  box-shadow: 0 8px 18px rgba(0, 0, 0, .18);
  z-index: 3;
  transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease;

  svg {
    width: 18px;
    height: 18px;
    stroke: $azul-noche;
    fill: none;
    stroke-width: 2;
  }

  &:hover {
    transform: translateY(-50%) scale(1.06);
    box-shadow: 0 10px 24px rgba(0, 0, 0, .22);
    background: color.adjust($blanco-roto, $lightness: 5%);
  }

  &:active {
    transform: translateY(-50%) scale(.97);
  }
}
.nav--prev { left: calc(var(--peek) - 32px/2); }
.nav--next { right: calc(var(--peek) - 32px/2); }

/* ===== Dots ===== */
.carousel__dots {
  display: flex;
  justify-content: center;
  gap: 8px;
  margin: 10px 0 0;
}
.dot {
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: var(--dot);
  border: 0;
  cursor: pointer;
  transition: width .2s ease, background .2s ease;

  &.is-active {
    width: 18px;
    background: var(--dot-active);
  }
}

/* ===== Breakpoints ===== */
@media (max-width: 1280px) {
  .carousel {
    --container-max: 1024px;
    --slide-h: 220px;
    --peek: 32px;
  }
  .slide__logo { width: calc(var(--logo-box) - 30px); }
}

@media (max-width: 1024px) {
  .carousel {
    --container-max: 920px;
    --slide-h: 210px;
    --peek: 24px;
  }
}

@media (max-width: 900px) {
  .carousel {
    --container-max: 820px;
    --slide-h: 205px;
    --peek: 20px;
  }
  .nav--prev { left: calc(var(--peek) - 30px/2); }
  .nav--next { right: calc(var(--peek) - 30px/2); }
}

@media (max-width: 720px) {
  .carousel {
    --container-max: 100%;
    --slide-h: 200px;
    --peek: 12px;       /* üîπ mucho menor en mobile */
    --gap: 12px;
    --logo-box: 96px;
    --logo-radius: 12px;
  }

  .carousel__title {
    padding: 0 var(--peek);
  }

  .nav {
    width: 28px;
    height: 28px;

    svg {
      width: 16px;
      height: 16px;
    }
  }

  .nav--prev { left: calc(var(--peek) - 28px/2); }
  .nav--next { right: calc(var(--peek) - 28px/2); }
}

/* Accesibilidad (reduce motion) */
@media (prefers-reduced-motion: reduce) {
  .carousel__track,
  .slide,
  .slide__media::before,
  .slide__logo,
  .nav,
  .dot {
    transition: none !important;
  }
}
